<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart4A Postly × Make 課程報名表單</title>
  <style>
    :root {
      --color-primary-start: #d4c4b0;
      --color-primary-end: #c4a484;
      --color-text-primary: #5d4e37;
      --color-card-bg: #ffffff;
      --color-card-border: #ede8e3;
      --color-accent: #8b6f47;
      --font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
    body {
      font-family: var(--font-family-base);
      background: linear-gradient(135deg, #f5f3f0, #ede8e3);
      color: var(--color-text-primary);
      margin: 0;
    }
    .hero {
      text-align: center;
      padding: 60px 20px;
      background: linear-gradient(135deg, var(--color-primary-start), var(--color-primary-end));
      color: white;
    }
    .hero h1 { font-size: 2.5rem; margin: 0; }

    .container {
      max-width: 1000px;
      margin: 40px auto;
      padding: 20px;
    }
    .card {
      background: var(--color-card-bg);
      border: 1px solid var(--color-card-border);
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
      margin-bottom: 30px;
    }

    /* Tabs */
    .tabs {
      display: flex;
      border-bottom: 2px solid var(--color-card-border);
      margin-bottom: 20px;
    }
    .tab {
      flex: 1;
      padding: 15px;
      text-align: center;
      font-weight: bold;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: 0.3s;
    }
    .tab.active {
      border-bottom: 3px solid var(--color-accent);
      color: var(--color-accent);
    }
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* 課程介紹樣式 */
    .intro-header {
      text-align: center;
      margin-bottom: 30px;
    }
    .intro-header h2 {
      font-size: 2rem;
      margin-bottom: 10px;
      color: var(--color-accent);
    }
    .intro-info {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin: 30px 0;
    }
    .info-item {
      background: #faf8f6;
      border: 1px solid var(--color-card-border);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }
    .info-item h3 {
      margin: 0;
      font-size: 1.1rem;
      color: var(--color-accent);
    }
    .highlights {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 20px;
    }
    .highlight-item {
      background: #fff;
      border: 1px solid var(--color-card-border);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      transition: 0.3s;
    }
    .highlight-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    }
    .highlight-item h3 {
      margin: 0 0 10px;
      font-size: 1.2rem;
      color: var(--color-accent);
    }

    /* 表單兩欄布局 */
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px 30px;
    }
    .form-group { display: flex; flex-direction: column; }
    .form-label { margin-bottom: 6px; font-weight: 600; }
    .form-input, select {
      padding: 12px;
      border: 1px solid var(--color-card-border);
      border-radius: 6px;
      font-size: 1rem;
    }
    .form-full { grid-column: span 2; }

    .btn-primary {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, var(--color-primary-start), var(--color-primary-end));
      color: white;
      font-size: 1.1rem;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .btn-primary:hover {
      background: linear-gradient(135deg, var(--color-accent), var(--color-primary-end));
    }
    .hidden { display: none; }

    @media (max-width: 768px) {
      .intro-info { grid-template-columns: 1fr 1fr; }
      .highlights { grid-template-columns: 1fr; }
      .form-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <!-- Hero -->
  <div class="hero">
    <h1>Smart4A Postly × Make 自動化應用培訓課程</h1>
  </div>

  <div class="container card">
    <!-- Tabs -->
    <div class="tabs">
      <div class="tab" data-tab="intro">課程介紹</div>
      <div class="tab active" data-tab="signup">課程報名</div>
    </div>

    <!-- 課程介紹 -->
    <div id="intro" class="tab-content">
      <div class="intro-header">
        <h2>課程介紹</h2>
        <p>六小時實體課程+六小時線上課程，完整實作，帶你從 Postly 插件應用到 Make 自動化，立即打造可落地的數位內容管理流程。</p>
      </div>

      <!-- 課程基本資訊 -->
      <div class="intro-info">
        <div class="info-item">
          <h3>⏰ 時間</h3>
          <p>2025/10/21 (二) 09:30–16:30</p>
        </div>
        <div class="info-item">
          <h3>📍 地點</h3>
          <p>台北市中正區忠孝東路一段76號3樓 </p>
        </div>
        <div class="info-item">
          <h3>📚 時數</h3>
          <p>6 + 6小時</p>
        </div>
        <div class="info-item">
          <h3>💰 費用</h3>
          <p>NT$ 10,000</p>
        </div>
      </div>

      <!-- 課程亮點 -->
      <div class="highlights">
        <div class="highlight-item">
          <h3>🔧 工具結合</h3>
          <p>Postly × Make 無縫整合，快速打造自動化流程。</p>
        </div>
        <div class="highlight-item">
          <h3>📈 即學即用</h3>
          <p>帶走可立即應用於內容管理與行銷的自動化範例。</p>
        </div>
        <div class="highlight-item">
          <h3>💡 零程式基礎</h3>
          <p>無需技術背景，任何人都能快速上手。</p>
        </div>
      </div>
    </div>

    <!-- 課程報名 -->
    <div id="signup" class="tab-content active">
      <h2>課程報名表單</h2>
      <form id="signupForm" class="form-grid">
        <!-- 日期 -->
        <div class="form-group">
          <label for="date" class="form-label">日期 *</label>
          <select id="date" name="date" required class="form-input">
            <option value="2025-10-21">2025/10/21 (二)</option>
          </select>
        </div>
        <!-- 姓名 -->
        <div class="form-group">
          <label for="name" class="form-label">姓名 *</label>
          <input type="text" id="name" name="name" required class="form-input">
        </div>
        <!-- 手機 -->
        <div class="form-group">
          <label for="phone" class="form-label">手機號碼 *</label>
          <input type="tel" id="phone" name="phone" required class="form-input" placeholder="09xx-xxx-xxx">
        </div>
        <!-- Email -->
        <div class="form-group">
          <label for="email" class="form-label">電子郵件信箱 *</label>
          <input type="email" id="email" name="email" required class="form-input">
        </div>
        <div class="form-group">
          <label for="confirmEmail" class="form-label">再次確認電子郵件 *</label>
          <input type="email" id="confirmEmail" name="confirmEmail" required class="form-input">
        </div>
        <!-- 優惠碼 -->
        <div class="form-group">
          <label for="promoCode" class="form-label">優惠碼</label>
          <input type="text" id="promoCode" name="promoCode" class="form-input" placeholder="輸入優惠碼（若有）">
        </div>
        <!-- 原價 -->
        <div class="form-group">
          <label for="amount" class="form-label">課程費用 (NT$) *</label>
          <input type="text" id="amount" name="amount" value="10000" readonly class="form-input">
        </div>
        <!-- 應付金額 -->
        <div class="form-group">
          <label for="finalAmount" class="form-label">應付金額 (NT$)</label>
          <input type="text" id="finalAmount" name="finalAmount" value="10000" readonly class="form-input">
        </div>
        <!-- 付款方式 -->
        <div class="form-group">
          <label for="paymentMethod" class="form-label">付款方式 *</label>
          <select id="paymentMethod" name="paymentMethod" required class="form-input">
            <option value="">請選擇</option>
            <option value="credit">信用卡</option>
            <option value="atm">ATM 轉帳</option>
            <option value="ibon">ibon</option>
          </select>
        </div>
        <!-- 發票類型 -->
        <div class="form-group">
          <label for="invoiceType" class="form-label">發票類型 *</label>
          <select id="invoiceType" name="invoiceType" required class="form-input">
            <option value="">請選擇</option>
            <option value="2">二聯式</option>
            <option value="3">三聯式</option>
          </select>
        </div>
        <!-- 統編 -->
        <div class="form-group hidden" id="invoiceTaxId">
          <label for="taxId" class="form-label">統一編號</label>
          <input type="text" id="taxId" name="taxId" class="form-input">
        </div>
        <!-- 抬頭 -->
        <div class="form-group hidden" id="invoiceTitleGroup">
          <label for="invoiceTitle" class="form-label">發票抬頭</label>
          <input type="text" id="invoiceTitle" name="invoiceTitle" class="form-input">
        </div>

        <!-- 按鈕 -->
        <div class="form-group form-full">
          <button type="submit" class="btn-primary">送出報名</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Tabs 切換
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });

    // 優惠碼清單
    const promoCodes = {
      "Smart4A": 0,
      "VIP2025": 0,
      "STUDENT": 0
    };

    const baseAmount = 10000;

    // 優惠碼檢查 → 計算最終金額
    document.getElementById('promoCode').addEventListener('input', function() {
      const code = this.value.trim();
      const discountValue = promoCodes[code] || 0;
      const finalAmount = baseAmount - discountValue;
      document.getElementById('finalAmount').value = finalAmount;
    });

    // 發票選擇 → 顯示/隱藏統編與抬頭（兩欄）
    document.getElementById('invoiceType').addEventListener('change', function() {
      const show = this.value === '3';
      document.getElementById('invoiceTaxId').classList.toggle('hidden', !show);
      document.getElementById('invoiceTitleGroup').classList.toggle('hidden', !show);
    });

    // 表單送出
    document.getElementById('signupForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const email = document.getElementById('email').value;
      const confirmEmail = document.getElementById('confirmEmail').value;
      if (email !== confirmEmail) {
        alert('電子郵件不一致，請重新確認');
        return;
      }

      const code = document.getElementById('promoCode').value.trim();
      const discountValue = promoCodes[code] || 0;
      const finalAmount = baseAmount - discountValue;

      const formData = {
        date: document.getElementById('date').value,
        name: document.getElementById('name').value,
        phone: document.getElementById('phone').value,
        email: email,
        promoCode: code,
        amount: baseAmount,
        discount: discountValue,
        finalAmount: finalAmount,
        paymentMethod: document.getElementById('paymentMethod').value,
        invoiceType: document.getElementById('invoiceType').value,
        taxId: document.getElementById('taxId').value || '',
        invoiceTitle: document.getElementById('invoiceTitle').value || ''
      };

      fetch("https://hook.us1.make.com/w64vu3ppp4br7l53w7myk4lt7b5kqgl3", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData)
      })
      .then(response => {
        if (response.ok) {
          window.location.href = "https://smart4a.tw/prod/cms/";
        } else {
          alert("送出失敗，請稍後再試。");
        }
      })
      .catch(error => {
        console.error("Webhook error:", error);
        alert("系統錯誤，請稍後再試。");
      });
    });
  </script>
</body>
</html>
